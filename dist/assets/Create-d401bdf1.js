import{i as x,u as C,r as o,j as t,P as R,o as h,l as j,h as y,z as f}from"./index-4b3d7bc8.js";import{u as I}from"./usePermissions-36032956.js";import{P as T}from"./PaymentReceivedForm-25868f01.js";import{A as b}from"./AccessDenied-45b92511.js";import"./calculation-671db1b1.js";import"./PaginateSelect-b668bdaf.js";import"./index-d9b76a87.js";const{PAYMENTS_RECEIVED:N}=h,{CRETAE_PAYMENT_RECEIVED:S,PAYMENT_RECEIVED_CREATE:D}=j,w=()=>{const c=x(),{checkPermission:m}=I(),{callAxios:r,toggle:d,bool:u}=C(),[n,l]=o.useState(0),[E,p]=o.useState([]),{has_InvoicePaymentRecordCreate_permission:v}=m("InvoicePaymentRecordCreate"),A=o.useCallback(s=>l(s),[]),P=o.useCallback(s=>p(s),[]),_=s=>{const g=E.map(({id:e,payment:a})=>({invoice_id:e,payment:a})).filter(e=>e.payment);d(),r({method:"post",data:{...s,invoices:g,used_amount:n},url:S}).then(e=>{var a,i;e&&(y({message:e.message}),f((i=(a=e==null?void 0:e.data)==null?void 0:a.advance_payment)==null?void 0:i.payment_no,!0,"paymentreceived"),c(-1))})};return t.jsx(t.Fragment,{children:v?t.jsxs(t.Fragment,{children:[t.jsx(R,{title:"Create Payment Received",navigateTo:N}),t.jsx(T,{loading:u,onSubmit:_,UsedAmount:n,url:D,handleUsedAmount:A,handleInvoiceList:P})]}):t.jsx(b,{})})};export{w as default};
