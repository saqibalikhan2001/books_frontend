import{j as e,P as C,p as S,n as f,o as k,r as p,ay as _,aa as x,cf as I,l as P,i as N,u as T,G as A,cK as F,$ as X,a4 as z}from"./index-4b3d7bc8.js";import{u as j}from"./usePermissions-36032956.js";import{A as R}from"./ActionMenu-149e95aa.js";import{u as v}from"./useSearchParam-ebfda256.js";import{u as L}from"./useDetailPageProps-fa80b790.js";const{expense:M}=S,{NEW_EXPENSE:$}=f,{ADD_EXPENSE:w}=k,H=()=>e.jsx(e.Fragment,{children:e.jsx(C.SubHeader,{title:M,btnText:$,navigateTo:w})}),{EXPENSES:O}=P,{NAME:h,CODE:E,DELETE:G}=f,B=({loading:o,refetch:c,listing:d,handleClick:s,handleConfirm:i,bulkDeleteTrue:r,handleViewClick:g})=>{const{checkPermission:n}=j(),{has_InvoicePaymentRecordDelete_permission:l}=n("InvoicePaymentRecordDelete"),a=p.useMemo(()=>[{title:"Date",dataIndex:"date",key:E,ellipsis:!0,render:t=>e.jsx(e.Fragment,{children:_(t)})},{title:"Refference",dataIndex:"ref_number",key:E,ellipsis:!0},{title:"Expense account",dataIndex:"",key:E,ellipsis:!0,render:t=>t.itemize===0?e.jsx(x,{children:t.expense_details[0].expense_category.name}):e.jsx(x,{children:"Itemized"})},{title:"Status",dataIndex:"status",key:h,ellipsis:!0,render:t=>e.jsx(x,{autoCapitalize:"",color:"blue",children:t},t)},{title:"Amount",dataIndex:"total_amount",key:h,ellipsis:!0},{title:"",dataIndex:"",width:50,key:"x",align:"center",render:t=>e.jsx(R,{data:t,handleClick:s,handleConfirm:i,canEdit:t.platform_type==="books",deletePermission:t.platform_type==="books"?l:!1,title:l&&t.platform_type==="books"?`${G} Report  ?`:"Permission Denied"})}],[i,l,s]);return e.jsx(e.Fragment,{children:e.jsx(I,{url:O,refetch:c,loading:o,listing:d,columns:a,bulkDeleteTrue:r,handleViewClick:g})})},{EXPENSES:K}=P,{EDIT_EXPENSE:Q}=k,Y=()=>{const o=N(),{getParams:c}=v(""),{bool:d,handleConfirm:s}=T();j();const{memoizeHandleClick:i,fullScreen:r}=L(),{bool:g,setTrue:n,setFalse:l}=A(),{data:a,isLoading:t,refetch:m}=F(c(),{refetchOnMountOrArgChange:!0}),b=p.useCallback(u=>s(u,K,m,n),[s,m,n]),D=u=>{o(`${Q}?id=${u.id}`)},y=p.useCallback(D,[o]);return e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsx(X,{children:e.jsx(z,{span:24,children:e.jsx(B,{refetch:m,showDetail:r,handleClick:y,bulkDeleteTrue:n,loading:d||t,listing:(a==null?void 0:a.expenses)||[],handleConfirm:b,handleViewClick:i})})})]})};export{Y as default};
