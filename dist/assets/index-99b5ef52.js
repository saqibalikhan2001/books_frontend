import{g as we,m as Pe,a5 as z,a6 as oe,b as se,r as c,a as k,a7 as de,c as S,d as me,a8 as Te,u as X,j as o,$ as ze,a4 as We,a9 as ue,T as N,s as _,a3 as ne,H as Re,S as B,aa as Ie,I as Y,l as G,h as Q,F as ae,M as ve,n as T,A as O,D as re,p as V,E as De,B as ie,ab as be,J as Fe,G as _e,ac as Be,ad as Ae}from"./index-4b3d7bc8.js";import{A as ge}from"./AccessDenied-45b92511.js";import{u as He}from"./usePermissions-36032956.js";const Me=new z("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),Le=new z("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),Ze=new z("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),Ve=new z("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),Ue=new z("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),ke=new z("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),Xe=e=>{const{componentCls:t,iconCls:r,antCls:n,badgeFontHeight:s,badgeShadowSize:l,badgeHeightSm:i,motionDurationSlow:u,badgeStatusSize:a,marginXS:g,badgeRibbonOffset:d}=e,m=`${n}-scroll-number`,b=`${n}-ribbon`,x=`${n}-ribbon-wrapper`,C=oe(e,(p,y)=>{let{darkColor:$}=y;return{[`${t}-status-${p}`]:{background:$}}}),f=oe(e,(p,y)=>{let{darkColor:$}=y;return{[`&${b}-color-${p}`]:{background:$,color:$}}});return{[t]:Object.assign(Object.assign({},se(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{zIndex:e.badgeZIndex,minWidth:e.badgeHeight,height:e.badgeHeight,color:e.badgeTextColor,fontWeight:e.badgeFontWeight,fontSize:e.badgeFontSize,lineHeight:`${e.badgeHeight}px`,whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:e.badgeHeight/2,boxShadow:`0 0 0 ${l}px ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:i,height:i,fontSize:e.badgeFontSizeSm,lineHeight:`${i}px`,borderRadius:i/2},[`${t}-multiple-words`]:{padding:`0 ${e.paddingXS}px`},[`${t}-dot`]:{zIndex:e.badgeZIndex,width:e.badgeDotSize,minWidth:e.badgeDotSize,height:e.badgeDotSize,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${l}px ${e.badgeShadowColor}`},[`${t}-dot${m}`]:{transition:`background ${u}`},[`${t}-count, ${t}-dot, ${m}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`${r}-spin`]:{animationName:ke,animationDuration:e.motionDurationMid,animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:Object.assign(Object.assign({lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:a,height:a,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{position:"relative",color:e.colorPrimary,backgroundColor:e.colorPrimary,"&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:l,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:Me,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning}},C),{[`${t}-status-text`]:{marginInlineStart:g,color:e.colorText,fontSize:e.fontSize}}),[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Le,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:Ze,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Ve,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:Ue,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${m}-custom-component, ${t}-count`]:{transform:"none"},[`${m}-custom-component, ${m}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[`${m}`]:{overflow:"hidden",[`${m}-only`]:{position:"relative",display:"inline-block",height:e.badgeHeight,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${m}-only-unit`]:{height:e.badgeHeight,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${m}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${m}-custom-component`]:{transform:"translate(-50%, -50%)"}}}),[`${x}`]:{position:"relative"},[`${b}`]:Object.assign(Object.assign(Object.assign(Object.assign({},se(e)),{position:"absolute",top:g,height:s,padding:`0 ${e.paddingXS}px`,color:e.colorPrimary,lineHeight:`${s}px`,whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${b}-text`]:{color:e.colorTextLightSolid},[`${b}-corner`]:{position:"absolute",top:"100%",width:d,height:d,color:"currentcolor",border:`${d/2}px solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),f),{[`&${b}-placement-end`]:{insetInlineEnd:-d,borderEndEndRadius:0,[`${b}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${b}-placement-start`]:{insetInlineStart:-d,borderEndStartRadius:0,[`${b}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}},pe=we("Badge",e=>{const{fontSize:t,lineHeight:r,fontSizeSM:n,lineWidth:s,marginXS:l,colorBorderBg:i}=e,u=Math.round(t*r),a=s,g="auto",d=u-2*a,m=e.colorBgContainer,b="normal",x=n,C=e.colorError,f=e.colorErrorHover,p=t,y=n/2,$=n,h=n/2,R=Pe(e,{badgeFontHeight:u,badgeShadowSize:a,badgeZIndex:g,badgeHeight:d,badgeTextColor:m,badgeFontWeight:b,badgeFontSize:x,badgeColor:C,badgeColorHover:f,badgeShadowColor:i,badgeHeightSm:p,badgeDotSize:y,badgeFontSizeSm:$,badgeStatusSize:h,badgeProcessingDuration:"1.2s",badgeRibbonOffset:l,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"});return[Xe(R)]}),Ye=e=>{let{className:t,prefixCls:r,style:n,color:s,children:l,text:i,placement:u="end"}=e;const{getPrefixCls:a,direction:g}=c.useContext(k),d=a("ribbon",r),m=de(s,!1),b=S(d,`${d}-placement-${u}`,{[`${d}-rtl`]:g==="rtl",[`${d}-color-${s}`]:m},t),[x,C]=pe(d),f={},p={};return s&&!m&&(f.background=s,p.color=s),x(c.createElement("div",{className:S(`${d}-wrapper`,C)},l,c.createElement("div",{className:S(b,C),style:Object.assign(Object.assign({},f),n)},c.createElement("span",{className:`${d}-text`},i),c.createElement("div",{className:`${d}-corner`,style:p}))))},Ge=Ye;function le(e){let{prefixCls:t,value:r,current:n,offset:s=0}=e,l;return s&&(l={position:"absolute",top:`${s}00%`,left:0}),c.createElement("span",{style:l,className:S(`${t}-only-unit`,{current:n})},r)}function Qe(e,t,r){let n=e,s=0;for(;(n+10)%10!==t;)n+=r,s+=r;return s}function Je(e){const{prefixCls:t,count:r,value:n}=e,s=Number(n),l=Math.abs(r),[i,u]=c.useState(s),[a,g]=c.useState(l),d=()=>{u(s),g(l)};c.useEffect(()=>{const x=setTimeout(()=>{d()},1e3);return()=>{clearTimeout(x)}},[s]);let m,b;if(i===s||Number.isNaN(s)||Number.isNaN(i))m=[c.createElement(le,Object.assign({},e,{key:s,current:!0}))],b={transition:"none"};else{m=[];const x=s+10,C=[];for(let y=s;y<=x;y+=1)C.push(y);const f=C.findIndex(y=>y%10===i);m=C.map((y,$)=>{const h=y%10;return c.createElement(le,Object.assign({},e,{key:y,value:h,offset:$-f,current:$===f}))});const p=a<l?1:-1;b={transform:`translateY(${-Qe(i,s,p)}00%)`}}return c.createElement("span",{className:`${t}-only`,style:b,onTransitionEnd:d},m)}var Ke=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const qe=c.forwardRef((e,t)=>{var{prefixCls:r,count:n,className:s,motionClassName:l,style:i,title:u,show:a,component:g="sup",children:d}=e,m=Ke(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]);const{getPrefixCls:b}=c.useContext(k),x=b("scroll-number",r),C=Object.assign(Object.assign({},m),{"data-show":a,style:i,className:S(x,s,l),title:u});let f=n;if(n&&Number(n)%1===0){const p=String(n).split("");f=p.map((y,$)=>c.createElement(Je,{prefixCls:x,count:Number(n),value:y,key:p.length-$}))}return i&&i.borderColor&&(C.style=Object.assign(Object.assign({},i),{boxShadow:`0 0 0 1px ${i.borderColor} inset`})),d?me(d,p=>({className:S(`${x}-custom-component`,p==null?void 0:p.className,l)})):c.createElement(g,Object.assign({},C,{ref:t}),f)}),et=qe;var tt=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const he=e=>{var{prefixCls:t,scrollNumberPrefixCls:r,children:n,status:s,text:l,color:i,count:u=null,overflowCount:a=99,dot:g=!1,size:d="default",title:m,offset:b,style:x,className:C,showZero:f=!1}=e,p=tt(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]);const{getPrefixCls:y,direction:$}=c.useContext(k),h=y("badge",t),[R,J]=pe(h),A=u>a?`${a}+`:u,I=A==="0"||A===0,xe=u===null||I&&!f,H=(s!=null||i!=null)&&xe,W=g&&!I,E=W?"":A,w=c.useMemo(()=>(E==null||E===""||I&&!f)&&!W,[E,I,f,W]),K=c.useRef(u);w||(K.current=u);const P=K.current,q=c.useRef(E);w||(q.current=E);const M=q.current,ee=c.useRef(W);w||(ee.current=W);const v=c.useMemo(()=>{if(!b)return Object.assign({},x);const j={marginTop:b[1]};return $==="rtl"?j.left=parseInt(b[0],10):j.right=-parseInt(b[0],10),Object.assign(Object.assign({},j),x)},[$,b,x]),Ce=m??(typeof P=="string"||typeof P=="number"?P:void 0),ye=w||!l?null:c.createElement("span",{className:`${h}-status-text`},l),$e=!P||typeof P!="object"?void 0:me(P,j=>({style:Object.assign(Object.assign({},v),j.style)})),D=de(i,!1),Se=S({[`${h}-status-dot`]:H,[`${h}-status-${s}`]:!!s,[`${h}-status-${i}`]:D}),L={};i&&!D&&(L.color=i,L.background=i);const te=S(h,{[`${h}-status`]:H,[`${h}-not-a-wrapper`]:!n,[`${h}-rtl`]:$==="rtl"},C);if(!n&&H){const j=v.color;return R(c.createElement("span",Object.assign({},p,{className:S(te,J),style:v}),c.createElement("span",{className:Se,style:L}),l&&c.createElement("span",{style:{color:j},className:`${h}-status-text`},l)))}return R(c.createElement("span",Object.assign({},p,{className:S(te,J)}),n,c.createElement(Te,{visible:!w,motionName:`${h}-zoom`,motionAppear:!1,motionDeadline:1e3},j=>{let{className:je,ref:Oe}=j;const Ne=y("scroll-number",r),Z=ee.current,Ee=S({[`${h}-dot`]:Z,[`${h}-count`]:!Z,[`${h}-count-sm`]:d==="small",[`${h}-multiple-words`]:!Z&&M&&M.toString().length>1,[`${h}-status-${s}`]:!!s,[`${h}-status-${i}`]:D});let F=Object.assign({},v);return i&&!D&&(F=F||{},F.background=i),c.createElement(et,{prefixCls:Ne,show:!w,motionClassName:je,className:Ee,count:M,title:Ce,style:F,key:"scrollNumber",ref:Oe},$e)}),ye))};he.Ribbon=Ge;const ot=he,{Meta:st}=ue,{AiOutlineEdit:nt,RiDeleteBinLine:at,TiTickOutline:rt}=Y,{WAREHOUSE:ce}=G,it=({toggle:e,refetch:t,has_permission:r,warehouses:n=[]})=>{const{callAxios:s,handleConfirm:l}=X(),i=a=>{s({method:"put",url:`${ce}/${a}/markasprimary`}).then(g=>{g&&(Q({message:"Warehouse Marked as Primary successfully"}),t())})},u=c.useCallback(a=>l(a,ce,t),[l,t]);return o.jsx(o.Fragment,{children:o.jsx(ze,{gutter:[0,24],children:n.map(a=>{var g;return o.jsx(We,{span:8,children:o.jsx(ue,{hoverable:!0,title:o.jsx(ot.Ribbon,{text:a.is_primary?"Primary":"",color:a.is_primary?"gold":"white",style:a.is_primary?{top:"0",bottom:"0",right:"0"}:{},children:o.jsx(N,{children:a.name})}),style:{maxWidth:500,top:"20px"},headStyle:{paddingLeft:"24px",paddingRight:"0"},actions:[a.platform_type==="books"&&o.jsx(_,{size:"small",shape:"circle",icon:o.jsx(nt,{},"edit"),onClick:()=>e(a.id)},"button"),!a.is_primary&&a.platform_type==="books"&&o.jsx(ne,{placement:"top",title:r?`Delete "${a.name}" Warehouse ?`:" Permission Denied",okText:"Yes",cancelText:"No",onConfirm:()=>r&&u(a),children:o.jsx(_,{size:"small",shape:"circle",children:o.jsx(at,{})},"deletebtn")},"confirm"),a.is_primary?null:o.jsx(Re,{title:"Mark as Active",children:o.jsx(ne,{placement:"bottom",title:`Mark "${a.name}" Warehouse  as Primary?`,okText:"Yes",cancelText:"No",onConfirm:()=>i(a.id),children:o.jsx(_,{size:"small",shape:"circle",children:o.jsx(rt,{})})},"confirm")},"tickbtn")],children:o.jsx(st,{title:o.jsxs(B,{direction:"vertical",children:[o.jsx(N,{children:a.email}),o.jsx(Ie,{color:"geekblue",children:"Platform"})]}),description:o.jsxs(B,{direction:"vertical",children:[o.jsx(N,{children:a.address}),o.jsx(N,{children:`${a.city}, ${a.state}`}),o.jsx(N,{children:(g=a.country)==null?void 0:g.country_name}),o.jsx(N,{children:a.phone})]})})})},a.id)})})})},{FaWarehouse:lt,FaCity:U,AiOutlinePhone:ct,AiOutlineMail:dt}=Y,mt={name:"",state:"",city:"",address:"",zip_code:"",phone:"",country_id:null},fe=({bool:e,toggle:t,current:r,loading:n,onSubmit:s,ctry_list:l,has_permission:i})=>{const[u]=ae.useForm();c.useEffect(()=>{r&&Object.keys(r).length&&u.setFieldsValue({...r})},[r,u]);const a=()=>{u.resetFields()};return o.jsx(ve,{title:`${r!=null&&r.name?T.EDIT:T.CREATE} ${T._WAREHOUSE}`,style:{top:0},open:e,onCancel:t,maskClosable:!1,destroyOnClose:!0,footer:null,afterClose:a,children:i?o.jsxs(ae,{name:"new-warehouse",initialValues:mt,form:u,onFinish:s,children:[o.jsx(O,{size:"middle",name:"name",label:"",LeftIcon:o.jsx(lt,{}),rules:re({message:V.enter_name}),placeholder:V.enter_your_name}),o.jsx(O,{name:"email",label:"",LeftIcon:o.jsx(dt,{}),placeholder:"Email"}),o.jsx(De,{label:"",name:"country_id",rules:re({message:V.enter_country_name}),placeholder:"Country Name",options:l}),o.jsx(O,{size:"middle",label:"",name:"state",rules:[],LeftIcon:o.jsx(U,{}),placeholder:"State Name"}),o.jsx(O,{size:"middle",label:"",name:"city",rules:[],LeftIcon:o.jsx(U,{}),placeholder:"City Name"}),o.jsx(O,{size:"middle",label:"",name:"address",rules:[],LeftIcon:o.jsx(U,{}),placeholder:"Address"}),o.jsx(O,{size:"middle",label:"",name:"zip_code",rules:[],placeholder:"Zip Code"}),o.jsx(O,{size:"middle",label:"",name:"phone",rules:[],LeftIcon:o.jsx(ct,{}),placeholder:"Phone"}),o.jsxs(B,{className:"steps-action",children:[o.jsx(ie,{type:"default",htmlType:"button",clickHandler:t,btnText:T.CANCEL}),o.jsx(ie,{block:!0,loading:n,style:{width:"120px"},btnText:r!=null&&r.name?T.UPDATE:T.CREATE})]})]}):o.jsx(ge,{})})},{WAREHOUSE:ut}=G,bt=({bool:e,toggle:t,refetch:r,current:n,ctry_list:s,has_permission:l})=>{const[i]=be(),{callAxios:u}=X(),a=g=>{t(),u({method:"put",data:g,url:`${ut}/${n.id}`}).then(d=>{t(),d&&(t(),r(),Q({message:d.message}))})};return o.jsx(o.Fragment,{children:o.jsx(fe,{bool:e,toggle:t,loading:i,current:n,onSubmit:a,ctry_list:s,has_permission:l})})},{FaWarehouse:gt,VscAdd:pt}=Y,{Title:ht}=N,{WAREHOUSE:ft}=G,xt=({ctry_list:e,refetch:t,has_permission:r})=>{const[n]=be(),{callAxios:s,bool:l,toggle:i}=X(),u=a=>{i(),s({method:"post",data:a,url:ft}).then(g=>{g&&(i(),t(),Q({message:g.message}))})};return o.jsxs(o.Fragment,{children:[o.jsx(fe,{bool:l,toggle:i,loading:n,onSubmit:u,ctry_list:e,has_permission:r}),o.jsx(Fe,{title:o.jsxs(B,{children:[o.jsx(gt,{size:25}),o.jsx(ht,{level:3,children:"Warehouses"})]}),extra:o.jsx(_,{icon:o.jsx(pt,{size:14}),className:"pr-color",onClick:i,children:"New Warehouse"},"1"),style:{borderBottom:"1px solid",paddingBottom:"0"}})]})},St=()=>{const{bool:e,toggle:t}=_e(),[r,n]=c.useState({}),{checkPermission:s}=He(),{has_WarehouseView_permission:l}=s("WarehouseView"),{has_WarehouseEdit_permission:i}=s("WarehouseEdit"),{has_WarehouseCreate_permission:u}=s("WarehouseCreate"),{has_WarehouseDelete_permission:a}=s("WarehouseDelete"),{data:g,refetch:d}=Be("",{refetchOnMountOrArgChange:!0,skip:!l}),{data:{country_list:m=[]}={}}=Ae("",{refetchOnMountOrArgChange:!0,skip:!l}),b=(m==null?void 0:m.map(({id:C,country_name:f})=>({id:C,label:f})))||[],x=C=>{const f=g.filter(p=>p.id===C)[0];n(f),t()};return o.jsxs(o.Fragment,{children:[o.jsx(xt,{refetch:d,ctry_list:b,has_permission:u}),l?o.jsx(it,{refetch:d,toggle:x,warehouses:g||[],has_permission:a}):o.jsx(ge,{}),e&&o.jsx(bt,{bool:e,toggle:t,current:r,refetch:d,ctry_list:b,has_permission:i})]})};export{St as default};
