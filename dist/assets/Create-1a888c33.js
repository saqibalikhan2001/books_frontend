import{i as _,r as n,u as b,j as a,l as j,h as y,z as A}from"./index-4b3d7bc8.js";import{C as O}from"./CustomerTab-c6c321f7.js";import{u as E}from"./usePermissions-36032956.js";import{A as L}from"./AccessDenied-45b92511.js";import"./useListing-af775608.js";import"./useDelayUnmount-cb77ae7b.js";import"./index-b8658cbe.js";import"./progress-e3fed29d.js";import"./ImageUploader-b2d6894b.js";const{CUSTOMERS:c,CREATE:R}=j,I=()=>{const m=_(),{checkPermission:l}=E(),[d,u]=n.useState([]),{callAxios:g,toggle:x,bool:h}=b(),[i,r]=n.useState([]),{has_ContactCreate_permission:C}=l("ContactCreate"),f=n.useCallback(s=>{r(s)},[]),S=s=>{let e=new FormData;const p={...s};for(const t in p)e.append(t,p[t]||"");e.append("contact_type_id","1"),e.append("currency_id",d),e.append("tax_exempt",JSON.stringify(!!s.tax_exempt)),e.append("same_as_billing",JSON.stringify(s.same_as_billing)),e.append("isContactImageDeleted",JSON.stringify(!s.photo));for(let[t,o]of Object.entries(i))e.append(`attachments[${t}]`,o.originFileObj);x(),g({method:"post",url:c,data:e}).then(t=>{var o;t&&(y({message:t.message}),A((o=t==null?void 0:t.data)==null?void 0:o.id,!0,"/suppliers"),m(-1))})};return a.jsx(a.Fragment,{children:C?a.jsx(a.Fragment,{children:a.jsx(O,{create:!0,supplier:!0,loading:h,onSubmit:S,attachList:i,setCurrency:u,setAttachList:r,url:`${c}${R}`,handleImageAttachList:f})}):a.jsx(L,{})})};export{I as default};
