import{i as b,r as o,u as C,j as e,P as f,o as A,l as S,h as r,p as I,am as m,z as T}from"./index-4b3d7bc8.js";import{B as E}from"./BillForm-53909519.js";import{u as F}from"./usePermissions-36032956.js";import{A as P}from"./AccessDenied-45b92511.js";import"./PaginateSelect-b668bdaf.js";import"./ItemTable-c0313657.js";import"./react-beautiful-dnd.esm-fdc0d50f.js";import"./Create-8edeb959.js";import"./ItemForm-ceb885e2.js";import"./ImageCrop-db92a92e.js";import"./ImageUploader-b2d6894b.js";import"./progress-e3fed29d.js";import"./index-d9b76a87.js";import"./index-b8658cbe.js";import"./Create-93e4462e.js";import"./calculation-671db1b1.js";import"./itemDetailModal-4a763e01.js";import"./DetailPage-51a1d58a.js";import"./capitalize-cfd5966b.js";import"./Processing-a1197381.js";const{BILLS:k}=A,{BILLS:N,BILL_CREATE:R}=S,tt=()=>{const n=b(),[l,c]=o.useState(0),{checkPermission:p}=F(),{callAxios:d,toggle:u,bool:g}=C(),[a,_]=o.useState([]),{has_BillCreate_permission:x}=p("BillCreate"),L=o.useCallback(t=>c(t),[]),h=o.useCallback(t=>_(t),[]),j=t=>{if(!a.length)r({message:I.select_item,type:"error"});else{const B={...t,due_date:m(t.due_date),bill_date:m(t.bill_date),items:a,total:l,discount_transaction_level:0,adjustment:t.adjustment||0};u(),d({method:"post",url:N,data:B}).then(s=>{var i;s&&(r({message:s.message}),T((i=s==null?void 0:s.data)==null?void 0:i.id,!0,"bills"),n(-1))})}};return e.jsx(e.Fragment,{children:x?e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Create New Bills",navigateTo:k}),e.jsx(E,{create:!0,loading:g,url:R,onSubmit:j,handleTotal:L,handleItemList:h})]}):e.jsx(P,{})})};export{tt as default};
