import{i as j,k as R,u as k,r as s,j as o,l as C,h as N}from"./index-4b3d7bc8.js";import{u as S}from"./usePermissions-36032956.js";import{P as U}from"./PaymentReceivedForm-25868f01.js";import{A as $}from"./AccessDenied-45b92511.js";import"./calculation-671db1b1.js";import"./PaginateSelect-b668bdaf.js";import"./index-d9b76a87.js";const{ADVANCE_PAYMENT:c}=C,w=()=>{const m=j(),[r]=R(),{checkPermission:d}=S(),{callAxios:u,toggle:p,bool:l}=k(),[n,A]=s.useState(0),[i,P]=s.useState(""),[_,h]=s.useState([]),{has_InvoicePaymentRecordEdit_permission:f}=d("InvoicePaymentRecordEdit"),g=r.get("id"),v=s.useCallback(e=>A(e),[]),x=s.useCallback(e=>P(e),[]),y=s.useCallback(e=>h(e),[]),E=e=>{var a;const I=_.map(({id:t,payment:b})=>({invoice_id:t,payment:b})).filter(t=>t.payment);p(),u({method:"put",url:`${c}/${i}/update`,data:{...e,invoices:I,used_amount:n,customer_id:typeof e.customer_id=="object"?(a=e.customer_id)==null?void 0:a.id:e.customer_id,id:i,refund_amount:0}}).then(t=>{t&&(N({message:t.message}),m(-1))})};return o.jsx(o.Fragment,{children:f?o.jsx(U,{loading:l,onSubmit:E,UsedAmount:n,handlePaymentId:x,handleUsedAmount:v,handleInvoiceList:y,url:`${c}/${g}/edit`}):o.jsx($,{})})};export{w as default};
