import{i as R,r as e,k as S,u as A,j as o,l as O,am as a,h as b}from"./index-4b3d7bc8.js";import{u as k}from"./usePermissions-36032956.js";import{P as C}from"./PurchaseOrderForm-00876276.js";import{A as D}from"./AccessDenied-45b92511.js";import"./PaginateSelect-b668bdaf.js";import"./ItemTable-c0313657.js";import"./react-beautiful-dnd.esm-fdc0d50f.js";import"./Create-8edeb959.js";import"./ItemForm-ceb885e2.js";import"./ImageCrop-db92a92e.js";import"./ImageUploader-b2d6894b.js";import"./progress-e3fed29d.js";import"./index-d9b76a87.js";import"./index-b8658cbe.js";import"./Create-93e4462e.js";import"./calculation-671db1b1.js";import"./itemDetailModal-4a763e01.js";import"./DetailPage-51a1d58a.js";import"./capitalize-cfd5966b.js";import"./Processing-a1197381.js";const{PURCHASE_ORDERS:m}=O;function W(){const d=R(),[n,c]=e.useState(0),[p]=S(),{checkPermission:u}=k(),{callAxios:l,toggle:_,bool:h}=A(),r=p.get("id"),[x,P]=e.useState([]),{has_PurchaseOrderEdit_permission:g}=u("PurchaseOrderEdit"),E=e.useCallback(t=>c(t),[]),f=e.useCallback(t=>P(t),[]),j=t=>{var s;_(),l({method:"put",url:`${m}/${r}`,data:{...t,items:x,total:n,discount_transaction_level:0,adjustment:t.adjustment||0,order_date:a(t.order_date),expected_delivery_date:a(t.expected_delivery_date),vendor_id:typeof t.vendor_id=="object"?(s=t.vendor_id)==null?void 0:s.id:t.vendor_id}}).then(i=>{i&&(b({message:i.message}),d(-1))})};return o.jsx(o.Fragment,{children:g?o.jsx(C,{loading:h,onSubmit:j,handleTotal:E,handleItemList:f,url:`${m}/${r}/edit`}):o.jsx(D,{})})}export{W as default};
