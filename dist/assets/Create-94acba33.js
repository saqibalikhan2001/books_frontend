import{i as b,r as n,u as A,j as e,h as O,l as P}from"./index-4b3d7bc8.js";import{r as v,R as L,a as C,b as E}from"./RoleForm-97d2f5d6.js";import{u as S}from"./usePermissions-36032956.js";import{A as w}from"./AccessDenied-45b92511.js";import"./index-9f4b88aa.js";const{ROLE:F}=P,_={sales:[],settings:[],inventory:[],purchases:[]},T=()=>{const i=b(),{checkPermission:c}=S(),[l,a]=n.useState(!1),{callAxios:m,bool:u,toggle:d}=A(),{has_RoleCreate_permission:g}=c("RoleCreate"),[r,p]=n.useReducer(v,_),f=h=>{const t=Object.values(r).flat(),j=C.reduce((s,o)=>Object.assign(s,{[o.id]:!1}),{}),x=t.reduce((s,o)=>Object.assign(s,{[o]:!0}),{}),R=Object.assign({},j,x);if(t.length)d(),m({method:"post",data:{...h,permissions:R},url:F}).then(s=>{s&&(O({message:s.message}),i(-1),E())});else{a(!t.length);return}};return e.jsx(e.Fragment,{children:g?e.jsx(L,{loading:u,onSubmit:f,setAlert:a,dispatch:p,roleAlert:l,itemPermissions:r}):e.jsx(w,{})})};export{T as default};
