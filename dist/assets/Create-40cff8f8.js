import{i as w,r as s,u as L,j as a,P as D,o as P,l as T,h as i,p as k,am as n,z as y}from"./index-4b3d7bc8.js";import{S as F}from"./SalesOrderForm-96138322.js";import{u as W}from"./usePermissions-36032956.js";import{A as N}from"./AccessDenied-45b92511.js";import"./PaginateSelect-b668bdaf.js";import"./ItemTable-c0313657.js";import"./react-beautiful-dnd.esm-fdc0d50f.js";import"./Create-8edeb959.js";import"./ItemForm-ceb885e2.js";import"./ImageCrop-db92a92e.js";import"./ImageUploader-b2d6894b.js";import"./progress-e3fed29d.js";import"./index-d9b76a87.js";import"./index-b8658cbe.js";import"./Create-93e4462e.js";import"./calculation-671db1b1.js";import"./itemDetailModal-4a763e01.js";import"./DetailPage-51a1d58a.js";import"./capitalize-cfd5966b.js";import"./Processing-a1197381.js";const{SALES_ORDERS:v}=P,{SALES_ORDERS:z,SALES_ORDERS_CREATE:H}=T,ne=()=>{const m=w(),[d,c]=s.useState(0),{checkPermission:l}=W(),{callAxios:p,toggle:u,bool:h}=L(),[o,S]=s.useState([]),[_,g]=s.useState(""),{has_SalesOrderCreate_permission:x}=l("SalesOrderCreate"),[E,A]=s.useState(),O=s.useCallback(e=>S(e),[]),R=s.useCallback(e=>c(e),[]),j=s.useCallback(e=>g(e),[]),C=s.useCallback(e=>A(e),[]),I=e=>{if(!o.length)i({message:k.select_item,type:"error"});else{const b=o.map(t=>({...t,warehouseId:t.warehouse_id})),f={...e,total:d,items:b,discount_transaction_level:0,adjustment:e.adjustment||0,shipping_charge:e.shipping_charge||0,warehouse_id:_||E,order_date:n(e.order_date),expected_shipment_date:n(e.expected_shipment_date)};u(),p({method:"post",url:z,data:f}).then(t=>{var r;t&&(i({message:t.message}),y((r=t==null?void 0:t.data)==null?void 0:r.id,!0,"salesOrder"),m(-1))})}};return a.jsx(a.Fragment,{children:x?a.jsxs(a.Fragment,{children:[a.jsx(D,{title:"Create SalesOrder",navigateTo:v}),a.jsx(F,{loading:h,onSubmit:I,handleTotal:R,url:H,handleItemList:O,handleWarehouseId:j,handlePrimaryWarehouse:C})]}):a.jsx(N,{})})};export{ne as default};
