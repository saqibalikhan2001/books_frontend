import{F as f,r as S,u as I,j as e,y as E,cz as h,H as M,s as D,S as V,B as $,T as z,I as G,h as R,cA as p,a2 as d,aw as x}from"./index-4b3d7bc8.js";/* empty css                       */import{u as H}from"./useTabs-bacf39f5.js";import{u as K}from"./usePermissions-36032956.js";import{A as Q}from"./AccessDenied-45b92511.js";import"./useSearchParam-ebfda256.js";const{Text:O}=z,{RiDeleteBinLine:q,VscAdd:J}=G,m=({data:s,url:r="",isLoading:n,refetch:u})=>{const[j]=f.useForm(),[g,k]=S.useState(!1),{callAxios:b,bool:w,toggle:C}=I();S.useEffect(()=>{j.setFieldValue("preferences",s==null?void 0:s.preferences)},[s,g]);const B=l=>{let c={slug:s.slug,preferences:l==null?void 0:l.preferences};b({method:"put",data:c,url:`table-setting/${r}`}).then(a=>{a&&(R({message:a.message}),C(),u())})},F=l=>{var o;const c=(o=s==null?void 0:s.preferences)==null?void 0:o.filter(i=>i.locked).map(i=>i.slug);if(!c.includes(l))c.push(l);else{const i=c.indexOf(l);c.splice(i,1)}let t={slug:s.slug,lock_status:!0,lock_column:c};b({method:"post",data:t,url:"reorder"}).then(i=>{C(),u(),i||k(!g)})};return n?e.jsx(E,{}):e.jsx(e.Fragment,{children:e.jsxs(f,{name:"form-pref",form:j,onFinish:B,children:[e.jsxs("table",{style:{width:"100%",borderSpacing:0,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#d9d9d929"},children:[e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Column Name"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Is Lockable"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Current Locked Columns"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Default Columns"})]})}),e.jsx(f.List,{name:"preferences",children:(l,{add:c,remove:a})=>e.jsxs(e.Fragment,{children:[l.map(({key:t,name:o,...i})=>{var P,T,_,A,L,y,v;return e.jsx("tbody",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(0, 0, 0, 0.06)"},children:[e.jsx("td",{style:{textAlign:"left",padding:"8px"},children:e.jsx(O,{children:(P=s==null?void 0:s.preferences[t])==null?void 0:P.name})}),e.jsx("td",{style:{textAlign:"left",padding:"8px"},children:e.jsx(h,{disabled:((T=s==null?void 0:s.preferences[t])==null?void 0:T.default)||((_=s==null?void 0:s.preferences[t])==null?void 0:_.locked),...i,name:[`${o}`,"is_lockable"]})}),e.jsx("td",{style:{textAlign:"left",padding:"8px"},children:((A=s==null?void 0:s.preferences[t])==null?void 0:A.is_lockable)&&e.jsx(h,{disabled:(L=s==null?void 0:s.preferences[t])==null?void 0:L.default,...i,name:[`${o}`,"locked"],handleClick:()=>{var N;return F((N=s==null?void 0:s.preferences[t])==null?void 0:N.slug)}})}),e.jsx("td",{style:{textAlign:"left",padding:"8px"},children:((y=s==null?void 0:s.preferences[t])==null?void 0:y.default)&&e.jsx(h,{disabled:(v=s==null?void 0:s.preferences[t])==null?void 0:v.default,...i,name:[`${o}`,"default"]})}),e.jsx("td",{style:{display:"none"},children:e.jsx(M,{title:"Delete",children:e.jsx(D,{shape:"circle",icon:e.jsx(q,{size:14,color:"red"}),onClick:()=>a(o)})})})]},t)})}),e.jsx(f.Item,{children:e.jsxs(O,{onClick:()=>c(),style:{color:"blue",cursor:"pointer",display:"none"},children:[e.jsx(J,{color:"blue"})," Add Anthor Line"]})})]})})]}),e.jsx(V,{children:e.jsx($,{btnText:"Save",loading:w,wrapperCol:{offset:10},className:"btn-form-size btn-primary"})})]})})},U=()=>{const{data:s,isLoading:r,refetch:n}=p("invoices",{refetchOnMountOrArgChange:!0});return e.jsxs("div",{className:"main_wrapper preference_form",children:[e.jsx(d,{from:"Table Preference",name:"Invoice list",setting:!0}),e.jsx("div",{className:"_container",children:e.jsx(m,{refetch:n,data:s,url:"invoice",isLoading:r})})]})},W=()=>{const{data:s,isLoading:r,refetch:n}=p("supplier",{refetchOnMountOrArgChange:!0});return e.jsxs("div",{className:"main_wrapper preference_form",children:[e.jsx(d,{from:"Table Preference",name:"Supplier list",setting:!0}),e.jsx("div",{className:"_container",children:e.jsx(m,{refetch:n,data:s,url:"Supplier",isLoading:r})})]})},X=()=>{const{data:s,isLoading:r,refetch:n}=p("item",{refetchOnMountOrArgChange:!0});return e.jsxs("div",{className:"main_wrapper preference_form",children:[e.jsx(d,{from:"Table Preference",name:"Products list",setting:!0}),e.jsx("div",{className:"_container",children:e.jsx(m,{refetch:n,data:s,url:"item",isLoading:r})})]})},Y=()=>{const{data:s,isLoading:r,refetch:n}=p("customer",{refetchOnMountOrArgChange:!0});return e.jsxs("div",{className:"main_wrapper preference_form",children:[e.jsx(d,{from:"Table Preference",name:"Customer list",setting:!0}),e.jsx("div",{className:"_container",children:e.jsx(m,{refetch:n,data:s,url:"customer",isLoading:r})})]})},Z=()=>{const{data:s,isLoading:r,refetch:n}=p("estimates",{refetchOnMountOrArgChange:!0});return e.jsxs("div",{className:"main_wrapper preference_form",children:[e.jsx(d,{from:"Table Preference",name:"Estimate list",setting:!0}),e.jsx("div",{className:"_container",children:e.jsx(m,{refetch:n,data:s,url:"estimate",isLoading:r})})]})},ee=({current:s,handleChange:r})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"preferance-left-tab",children:e.jsxs(x,{type:"card",tabBarGutter:0,tabPosition:"left",activeKey:s,onChange:r,className:"preference_tab",children:[e.jsx(x.TabPane,{tab:e.jsx("label",{children:"Product Listing"}),children:e.jsx(X,{})},"1"),e.jsx(x.TabPane,{tab:e.jsx("label",{children:"Customer Listing"}),children:e.jsx(Y,{})},"2"),e.jsx(x.TabPane,{tab:e.jsx("label",{children:"Supplier Listing"}),children:e.jsx(W,{})},"3"),e.jsx(x.TabPane,{tab:e.jsx("label",{children:"Estimate Listing"}),children:e.jsx(Z,{})},"4"),e.jsx(x.TabPane,{tab:e.jsx("label",{children:"Invoice Listing"}),children:e.jsx(U,{})},"5")]})})}),ce=()=>{const{checkPermission:s}=K(),{current:r,handleChange:n}=H(!0),{has_PreferenceView_permission:u}=s("PreferenceView");return e.jsx(e.Fragment,{children:u?e.jsx(e.Fragment,{children:e.jsx(ee,{handleChange:n,current:r})}):e.jsx(Q,{})})};export{ce as default};
