import{i as N,u as A,r as s,ab as T,aD as b,j as i,P as v,o as y,p,l as L,h as c,am as m,z as S}from"./index-4b3d7bc8.js";import{R as D}from"./RecurringInvoiceForm-09d13ada.js";import{u as F}from"./usePermissions-36032956.js";import{A as G}from"./AccessDenied-45b92511.js";import"./RepeatModal-0fdc96f9.js";import"./PaginateSelect-b668bdaf.js";import"./ItemTable-c0313657.js";import"./react-beautiful-dnd.esm-fdc0d50f.js";import"./Create-8edeb959.js";import"./ItemForm-ceb885e2.js";import"./ImageCrop-db92a92e.js";import"./ImageUploader-b2d6894b.js";import"./progress-e3fed29d.js";import"./index-d9b76a87.js";import"./index-b8658cbe.js";import"./Create-93e4462e.js";import"./calculation-671db1b1.js";import"./itemDetailModal-4a763e01.js";import"./DetailPage-51a1d58a.js";import"./capitalize-cfd5966b.js";import"./Processing-a1197381.js";const{RECURRING_INVOICES:O}=y,{new_recurring_invoice:P}=p,{RECURRING_INVOICE:k,RECURRING_INVOICE_CREATE:U}=L,at=()=>{const d=N(),{callAxios:g}=A(),[u,_]=s.useState(0),[l,r]=T(),{checkPermission:R}=F(),[o,I]=s.useState(),{has_RecurringInvoicesCreate_permission:h}=R("RecurringInvoicesCreate"),{data:C=[]}=b(""),f=s.useCallback(t=>_(t),[]),j=s.useCallback(t=>I(t),[]),x=t=>{let a;if(typeof t.repeat_duration=="string"){const e=t.repeat_duration.split(" ");a=e[0]+" "+e[1].split("(s)")[0].toLowerCase()}const E=a||t.repeat_duration.value;o!=null&&o.length?(r(),g({method:"post",url:`${k}`,data:{...t,total:u,items:o,discount_type:"",repeat_duration:E,adjustment:t.adjustment||0,shipping_charge:t.shipping_charge||0,invoice_terms:typeof t.invoice_terms!="object"?C.find(e=>e.id===t.invoice_terms)||{}:t.invoice_terms,end_date:m(t.end_date),start_date:m(t.start_date)}}).then(e=>{var n;r(),e&&(c({message:e.message}),S((n=e==null?void 0:e.data)==null?void 0:n.id,!0,"Recurringinvoices"),d(-1))})):c({message:p.select_item,type:"error"})};return i.jsx(i.Fragment,{children:h?i.jsxs(i.Fragment,{children:[i.jsx(v,{title:P,navigateTo:O}),i.jsx(D,{create:!0,loading:l,onSubmit:x,handleTotal:f,url:U,handleItemList:j})]}):i.jsx(G,{})})};export{at as default};
