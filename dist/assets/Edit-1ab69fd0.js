import{i as L,k as $,r as o,u as v,ai as F,j as r,h as _,l as k}from"./index-4b3d7bc8.js";import{r as w,R as y,f as C,a as N}from"./RoleForm-97d2f5d6.js";import{u as B}from"./usePermissions-36032956.js";import{A as D}from"./AccessDenied-45b92511.js";import"./index-9f4b88aa.js";const{ROLE:l}=k,J={sales:[],settings:[],inventory:[],purchases:[]},I=()=>{const u=L(),[d]=$(),n=d.get("id"),[p,f]=o.useState(),{checkPermission:g}=B(),[h,c]=o.useState(!1),{callAxios:x,bool:R,toggle:j}=v(),{has_RoleEdit_permission:t}=g("RoleEdit"),[m,A]=o.useReducer(w,J),{details:s}=F(`${l}/${n}/edit`,t);o.useEffect(()=>{s!=null&&s.permissions&&t&&f({...s,permissions:JSON.parse(s.permissions)})},[s,t]);const E=P=>{j();const i=C(m),S=N.reduce((e,a)=>Object.assign(e,{[a.id]:!1}),{}),b=i.reduce((e,a)=>Object.assign(e,{[a]:!0}),{}),O=Object.assign({},S,b);if(i.length)x({method:"put",data:{...P,permissions:O},url:`${l}/${n}`}).then(e=>{e&&_({message:e.message}),u(-1)});else{c(!i.length);return}};return r.jsxs(r.Fragment,{children:[t?r.jsx(y,{loading:R,current:p,onSubmit:E,setAlert:c,roleAlert:h,dispatch:A,itemPermissions:m}):r.jsx(D,{})," "]})};export{I as default};
