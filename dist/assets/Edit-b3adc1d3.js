import{i as L,r as i,k as $,u as B,aD as C,j as r,l as P,am as n,h as S}from"./index-4b3d7bc8.js";import{R as k}from"./Form-e90ab2db.js";import{u as y}from"./usePermissions-36032956.js";import{A as w}from"./AccessDenied-45b92511.js";import"./RepeatModal-0fdc96f9.js";import"./PaginateSelect-b668bdaf.js";import"./ItemTable-c0313657.js";import"./react-beautiful-dnd.esm-fdc0d50f.js";import"./Create-8edeb959.js";import"./ItemForm-ceb885e2.js";import"./ImageCrop-db92a92e.js";import"./ImageUploader-b2d6894b.js";import"./progress-e3fed29d.js";import"./index-d9b76a87.js";import"./index-b8658cbe.js";import"./Create-93e4462e.js";import"./calculation-671db1b1.js";import"./itemDetailModal-4a763e01.js";import"./DetailPage-51a1d58a.js";import"./capitalize-cfd5966b.js";import"./Processing-a1197381.js";const{RECURRING_BILL:m,EDIT:F,UPDATE:G}=P,st=()=>{const d=L(),[p,c]=i.useState(0),[l]=$(),{checkPermission:_}=y(),{callAxios:u,bool:g,toggle:f}=B(),s=l.get("id"),[b,h]=i.useState(),{has_RecurringBillsEdit_permission:j}=_("RecurringBillsEdit"),{data:x=[]}=C(""),R=i.useCallback(t=>c(t),[]),E=i.useCallback(t=>h(t),[]),T=t=>{var a;let o,A=/\d/.test(t.repeat_duration);typeof t.repeat_duration=="string"&&(A?o=t.repeat_duration.split(" ")[0]+" "+t.repeat_duration.split(" ")[1].split("(s)")[0].toLowerCase():o=t.repeat_duration.split("(s)")[0].toLowerCase());const D=o||t.repeat_duration.value,I={...t,repeat_duration:D,bill_terms:typeof t.bill_terms!="object"?x.find(e=>e.id===t.bill_terms)||{}:t.bill_terms,vendor_id:typeof t.vendor_id=="object"?(a=t.vendor_id)==null?void 0:a.id:t.vendor_id,start_date:n(t.start_date),end_date:n(t.end_date),items:b,total:p,discount_transaction_level:0,adjustment:t.adjustment||0};f(),u({method:"put",url:`${m}/${s}${G}`,data:I}).then(e=>{e&&(S({message:e.message}),d(-1))})};return r.jsx(r.Fragment,{children:j?r.jsx(k,{loading:g,onSubmit:T,handleTotal:R,handleItemList:E,url:`${m}/${s}${F}`}):r.jsx(w,{})})};export{st as default};
