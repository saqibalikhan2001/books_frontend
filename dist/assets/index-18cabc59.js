import{r as i,j as p,$ as j,a4 as z}from"./index-4b3d7bc8.js";function O(l,a,t){i.useEffect(()=>{if(!document)return;const r=document.querySelector('script[src="'.concat(l,'"]'));if(r!=null&&r.dataset.loaded){a==null||a();return}const o=r||document.createElement("script");r||(o.src=l);const e=()=>{o.dataset.loaded="1",a==null||a()};return o.addEventListener("load",e),t&&o.addEventListener("error",t),r||document.head.append(o),()=>{o.removeEventListener("load",e),t&&o.removeEventListener("error",t)}},[])}function k(l){let{chartVersion:a="current",chartPackages:t=["corechart","controls"],chartLanguage:r="en",mapsApiKey:o}=l;const[e,s]=i.useState(null),[c,u]=i.useState(!1);return O("https://www.gstatic.com/charts/loader.js",()=>{const n=window==null?void 0:window.google;n&&(n.charts.load(a,{packages:t,language:r,mapsApiKey:o}),n.charts.setOnLoadCallback(()=>{s(n)}))},()=>{u(!0)}),[e,c]}function M(l){let{onLoad:a,onError:t,...r}=l;const[o,e]=k(r);return i.useEffect(()=>{o&&a&&a(o)},[o]),i.useEffect(()=>{e&&t&&t()},[e]),null}const I={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let T=0;const _=()=>(T+=1,"reactgooglegraph-".concat(T)),R=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],B=async function(l,a){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,o)=>{const e="".concat(t.headers?"headers=".concat(t.headers):"headers=0"),s="".concat(t.query?"&tq=".concat(encodeURIComponent(t.query)):""),c="".concat(t.gid?"&gid=".concat(t.gid):""),u="".concat(t.sheet?"&sheet=".concat(t.sheet):""),n="".concat(t.access_token?"&access_token=".concat(t.access_token):""),h="".concat(e).concat(c).concat(u).concat(s).concat(n),g="".concat(a,"/gviz/tq?").concat(h);new l.visualization.Query(g).send(v=>{v.isError()?o("Error in query:  ".concat(v.getMessage()," ").concat(v.getDetailedMessage())):r(v.getDataTable())})})},{Provider:U,Consumer:q}=i.createContext(I),N=l=>{let{children:a,value:t}=l;return i.createElement(U,{value:t},a)},P=l=>{let{render:a}=l;return i.createElement(q,null,t=>a(t))},H="#CCCCCC";class $ extends i.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:a,googleChartWrapper:t}=this.props;window.removeEventListener("resize",this.onResize),a.visualization.events.removeAllListeners(t),t.getChartType()==="Timeline"&&t.getChart()&&t.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...a){super(...a),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:t,googleChartWrapper:r}=this.props;t.visualization.events.addListener(r,"select",()=>{const e=r.getChart().getSelection(),s=r.getDataTable();if(e.length===0||e[0].row||!s)return;const c=e[0].column,u=this.getColumnID(s,c);this.state.hiddenColumns.includes(u)?this.setState(n=>({...n,hiddenColumns:[...n.hiddenColumns.filter(h=>h!==u)]})):this.setState(n=>({...n,hiddenColumns:[...n.hiddenColumns,u]}))})},this.applyFormatters=(t,r)=>{const{google:o}=this.props;for(let e of r)switch(e.type){case"ArrowFormat":{new o.visualization.ArrowFormat(e.options).format(t,e.column);break}case"BarFormat":{new o.visualization.BarFormat(e.options).format(t,e.column);break}case"ColorFormat":{const s=new o.visualization.ColorFormat(e.options),{ranges:c}=e;for(let u of c)s.addRange(...u);s.format(t,e.column);break}case"DateFormat":{new o.visualization.DateFormat(e.options).format(t,e.column);break}case"NumberFormat":{new o.visualization.NumberFormat(e.options).format(t,e.column);break}case"PatternFormat":{new o.visualization.PatternFormat(e.options).format(t,e.column);break}}},this.getColumnID=(t,r)=>t.getColumnId(r)||t.getColumnLabel(r),this.draw=async t=>{let{data:r,diffdata:o,rows:e,columns:s,options:c,legend_toggle:u,legendToggle:n,chartType:h,formatters:g,spreadSheetUrl:f,spreadSheetQueryParameters:v}=t;const{google:C,googleChartWrapper:m}=this.props;let d,w=null;if(o){const y=C.visualization.arrayToDataTable(o.old),E=C.visualization.arrayToDataTable(o.new);w=C.visualization[h].prototype.computeDiff(y,E)}r!==null?Array.isArray(r)?d=C.visualization.arrayToDataTable(r):d=new C.visualization.DataTable(r):e&&s?d=C.visualization.arrayToDataTable([s,...e]):f?d=await B(C,f,v):d=C.visualization.arrayToDataTable([]);const D=d.getNumberOfColumns();for(let y=0;y<D;y+=1){const E=this.getColumnID(d,y);if(this.state.hiddenColumns.includes(E)){const F=d.getColumnLabel(y),W=d.getColumnId(y),L=d.getColumnType(y);d.removeColumn(y),d.addColumn({label:F,id:W,type:L})}}const x=m.getChart();m.getChartType()==="Timeline"&&x&&x.clearChart(),m.setChartType(h),m.setOptions(c||{}),m.setDataTable(d),m.draw(),this.props.googleChartDashboard!==null&&this.props.googleChartDashboard.draw(d),w&&(m.setDataTable(w),m.draw()),g&&(this.applyFormatters(d,g),m.setDataTable(d),m.draw()),(n===!0||u===!0)&&this.grayOutHiddenColumns({options:c})},this.grayOutHiddenColumns=t=>{let{options:r}=t;const{googleChartWrapper:o}=this.props,e=o.getDataTable();if(!e)return;const s=e.getNumberOfColumns();if(this.state.hiddenColumns.length>0===!1)return;const u=Array.from({length:s-1}).map((n,h)=>{const g=this.getColumnID(e,h+1);return this.state.hiddenColumns.includes(g)?H:r&&r.colors?r.colors[h]:R[h]});o.setOptions({...r,colors:u}),o.draw()},this.onResize=()=>{const{googleChartWrapper:t}=this.props;t.draw()}}}class G extends i.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:a,googleChartWrapper:t,googleChartDashboard:r}=this.props;return i.createElement(P,{render:o=>i.createElement($,Object.assign({},o,{google:a,googleChartWrapper:t,googleChartDashboard:r}))})}}class V extends i.Component{shouldComponentUpdate(){return!1}listenToEvents(a){let{chartEvents:t,google:r,googleChartWrapper:o}=a;if(t){r.visualization.events.removeAllListeners(o);for(let s of t){var e=this;const{eventName:c,callback:u}=s;r.visualization.events.addListener(o,c,function(){for(var n=arguments.length,h=new Array(n),g=0;g<n;g++)h[g]=arguments[g];u({chartWrapper:o,props:e.props,google:r,eventArgs:h})})}}}render(){const{google:a,googleChartWrapper:t}=this.props;return i.createElement(P,{render:r=>(this.listenToEvents({chartEvents:r.chartEvents||null,google:a,googleChartWrapper:t}),null)})}}let A=0;class Q extends i.Component{componentDidMount(){const{options:a,google:t,chartType:r,chartWrapperParams:o,toolbarItems:e,getChartEditor:s,getChartWrapper:c}=this.props,u={chartType:r,options:a,containerId:this.getGraphID(),...o},n=new t.visualization.ChartWrapper(u);n.setOptions(a||{}),c&&c(n,t);const h=new t.visualization.Dashboard(this.dashboard_ref),g=this.addControls(n,h);e&&t.visualization.drawToolbar(this.toolbar_ref.current,e);let f=null;s&&(f=new t.visualization.ChartEditor,s({chartEditor:f,chartWrapper:n,google:t})),this.setState({googleChartEditor:f,googleChartControls:g,googleChartDashboard:h,googleChartWrapper:n,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper||!this.state.googleChartDashboard||!this.state.googleChartControls)return;const{controls:a}=this.props;if(a)for(let t=0;t<a.length;t+=1){const{controlType:r,options:o,controlWrapperParams:e}=a[t];e&&"state"in e&&this.state.googleChartControls[t].control.setState(e.state),this.state.googleChartControls[t].control.setOptions(o),this.state.googleChartControls[t].control.setControlType(r)}}shouldComponentUpdate(a,t){return this.state.isReady!==t.isReady||a.controls!==this.props.controls}render(){const{width:a,height:t,options:r,style:o}=this.props,e={height:t||r&&r.height,width:a||r&&r.width,...o};return this.props.render?i.createElement("div",{ref:this.dashboard_ref,style:e},i.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):i.createElement("div",{ref:this.dashboard_ref,style:e},this.renderControl(s=>{let{controlProp:c}=s;return c.controlPosition!=="bottom"}),this.renderChart(),this.renderControl(s=>{let{controlProp:c}=s;return c.controlPosition==="bottom"}),this.renderToolBar())}constructor(...a){var t;super(),t=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=i.createRef(),this.toolbar_ref=i.createRef(),this.getGraphID=()=>{const{graphID:r,graph_id:o}=this.props;let e;return!r&&!o?this.graphID?e=this.graphID:e=_():r&&!o?e=r:o&&!r?e=o:e=r,this.graphID=e,this.graphID},this.getControlID=(r,o)=>{A+=1;let e;return typeof r>"u"?e="googlechart-control-".concat(o,"-").concat(A):e=r,e},this.addControls=(r,o)=>{const{google:e,controls:s}=this.props,c=s?s.map((n,h)=>{const{controlID:g,controlType:f,options:v,controlWrapperParams:C}=n,m=this.getControlID(g,h);return{controlProp:n,control:new e.visualization.ControlWrapper({containerId:m,controlType:f,options:v,...C})}}):null;if(!c)return null;o.bind(c.map(n=>{let{control:h}=n;return h}),r);for(let n of c){const{control:h,controlProp:g}=n,{controlEvents:f=[]}=g;for(let v of f){var u=this;const{callback:C,eventName:m}=v;e.visualization.events.removeListener(h,m,C),e.visualization.events.addListener(h,m,function(){for(var d=arguments.length,w=new Array(d),D=0;D<d;D++)w[D]=arguments[D];C({chartWrapper:r,controlWrapper:h,props:u.props,google:e,eventArgs:w})})}}return c},this.renderChart=()=>{const{width:r,height:o,options:e,style:s,className:c,rootProps:u,google:n}=this.props,h={height:o||e&&e.height,width:r||e&&e.width,...s};return i.createElement("div",Object.assign({id:this.getGraphID(),style:h,className:c},u),this.state.isReady&&this.state.googleChartWrapper!==null?i.createElement(i.Fragment,null,i.createElement(G,{googleChartWrapper:this.state.googleChartWrapper,google:n,googleChartDashboard:this.state.googleChartDashboard}),i.createElement(V,{googleChartWrapper:this.state.googleChartWrapper,google:n})):null)},this.renderControl=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o=>!0;return t.state.isReady&&t.state.googleChartControls!==null?i.createElement(i.Fragment,null,t.state.googleChartControls.filter(o=>{let{controlProp:e,control:s}=o;return r({control:s,controlProp:e})}).map(o=>{let{control:e,controlProp:s}=o;return i.createElement("div",{key:e.getContainerId(),id:e.getContainerId()})})):null},this.renderToolBar=()=>this.props.toolbarItems?i.createElement("div",{ref:this.toolbar_ref}):null}}class b extends i.Component{render(){const{chartLanguage:a,chartPackages:t,chartVersion:r,mapsApiKey:o,loader:e,errorElement:s}=this.props;return i.createElement(N,{value:this.props},this.state.loadingStatus==="ready"&&this.state.google!==null?i.createElement(Q,Object.assign({},this.props,{google:this.state.google})):this.state.loadingStatus==="errored"&&s?s:e,i.createElement(M,{chartLanguage:a,chartPackages:t,chartVersion:r,mapsApiKey:o,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(a){const{controls:t,toolbarItems:r,getChartEditor:o}=this.props;return a&&a.visualization&&a.visualization.ChartWrapper&&a.visualization.Dashboard&&(!t||a.visualization.ChartWrapper)&&(!o||a.visualization.ChartEditor)&&(!r||a.visualization.drawToolbar)}constructor(...a){super(...a),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=t=>{if(this.props.onLoad&&this.props.onLoad(t),this.isFullyLoaded(t))this.onSuccess(t);else{const r=setInterval(()=>{const o=window.google;this._isMounted?o&&this.isFullyLoaded(o)&&(clearInterval(r),this.onSuccess(o)):clearInterval(r)},1e3)}},this.onSuccess=t=>{this.setState({loadingStatus:"ready",google:t})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}}b.defaultProps=I;var S;(function(l){l.annotation="annotation",l.annotationText="annotationText",l.certainty="certainty",l.emphasis="emphasis",l.interval="interval",l.scope="scope",l.style="style",l.tooltip="tooltip",l.domain="domain"})(S||(S={}));const K=[["Year","Sales","Expenses","Profit"],["2014",1e3,400,200],["2015",1170,460,250],["2016",660,1120,300],["2017",1030,540,350]],Y={chart:{title:"Company Performance",subtitle:"Sales, Expenses, and Profit: 2014-2017"}},J=()=>p.jsx(b,{chartType:"Bar",width:"100%",height:"400px",data:K,options:Y}),X=[["Task","Hours per Day"],["Work",11],["Eat",2],["Commute",2],["Watch TV",2],["Sleep",7]],Z={title:"My Daily Activities",is3D:!0},tt=()=>p.jsx(b,{chartType:"PieChart",data:X,options:Z,width:"100%",height:"400px"}),et=[["Year","Sales","Expenses"],["2013",1e3,400],["2014",1170,460],["2015",660,1120],["2016",100,540],["2017",1040,50],["2018",1e3,560],["2019",1050,640]],rt={isStacked:!0,height:300,legend:{position:"top",maxLines:3},vAxis:{minValue:0}},ot=()=>p.jsx(b,{chartType:"AreaChart",width:"100%",height:"400px",data:et,options:rt}),at=[["Name","Popularity"],["Cesar",250],["Rachel",4200],["Patrick",2900],["Eric",8200]],st=[["Name","Popularity"],["Cesar",370],["Rachel",600],["Patrick",700],["Eric",1500]],nt={old:at,new:st},it=()=>p.jsx(b,{chartType:"ColumnChart",width:"100%",height:"400px",diffdata:nt}),lt=[["Dinosaur","Length"],["Acrocanthosaurus (top-spined lizard)",12.2],["Albertosaurus (Alberta lizard)",9.1],["Allosaurus (other lizard)",12.2],["Apatosaurus (deceptive lizard)",22.9],["Archaeopteryx (ancient wing)",.9],["Argentinosaurus (Argentina lizard)",36.6],["Baryonyx (heavy claws)",9.1],["Brachiosaurus (arm lizard)",30.5],["Ceratosaurus (horned lizard)",6.1],["Coelophysis (hollow form)",2.7],["Compsognathus (elegant jaw)",.9],["Deinonychus (terrible claw)",2.7],["Diplodocus (double beam)",27.1],["Dromicelomimus (emu mimic)",3.4],["Gallimimus (fowl mimic)",5.5],["Mamenchisaurus (Mamenchi lizard)",21],["Megalosaurus (big lizard)",7.9],["Microvenator (small hunter)",1.2],["Ornithomimus (bird mimic)",4.6],["Oviraptor (egg robber)",1.5],["Plateosaurus (flat lizard)",7.9],["Sauronithoides (narrow-clawed lizard)",2],["Seismosaurus (tremor lizard)",45.7],["Spinosaurus (spiny lizard)",12.2],["Supersaurus (super lizard)",30.5],["Tyrannosaurus (tyrant lizard)",15.2],["Ultrasaurus (ultra lizard)",30.5],["Velociraptor (swift robber)",1.8]],ct={title:"Lengths of dinosaurs, in meters",legend:{position:"none"}},ht=()=>p.jsx(b,{chartType:"Histogram",width:"100%",height:"400px",data:lt,options:ct}),dt=()=>p.jsx(p.Fragment,{children:p.jsxs(j,{gutter:[0,14],children:[p.jsx(z,{span:8,children:p.jsx(ot,{})}),p.jsx(z,{span:6,children:p.jsx(J,{})}),p.jsx(z,{span:8,children:p.jsx(it,{})}),p.jsx(z,{span:8,children:p.jsx(ht,{})}),p.jsx(z,{span:8,children:p.jsx(tt,{})})]})});export{dt as default};
