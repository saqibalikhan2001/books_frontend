import{bb as re,r as f,bL as se,c as A,bt as E,bn as z,bo as q,bp as W,br as X,bs as oe,bl as H,a8 as le,bq as ie,bg as Y,bx as ce,a as Z,g as de,m as pe,bF as ue,b as me,cF as fe,bA as he,cG as ve,d as B,bi as Ce,aM as ge,j as v,C as F,S as xe,B as j,i as be,u as ye,aH as $e,v as Ie,$ as Pe,a4 as D,o as Q,aY as Se,l as R,aZ as Ne,h as G,a_ as Ee}from"./index-4b3d7bc8.js";var _e=function(e,o,a,t){var l=a?a.call(t,e,o):void 0;if(l!==void 0)return!!l;if(e===o)return!0;if(typeof e!="object"||!e||typeof o!="object"||!o)return!1;var c=Object.keys(e),r=Object.keys(o);if(c.length!==r.length)return!1;for(var n=Object.prototype.hasOwnProperty.bind(o),i=0;i<c.length;i++){var d=c[i];if(!n(d))return!1;var u=e[d],g=o[d];if(l=a?a.call(t,u,g,d):void 0,l===!1||l===void 0&&u!==g)return!1}return!0};const T=re(_e);var V=f.forwardRef(function(s,e){var o,a=s.prefixCls,t=s.forceRender,l=s.className,c=s.style,r=s.children,n=s.isActive,i=s.role,d=f.useState(n||t),u=se(d,2),g=u[0],p=u[1];return f.useEffect(function(){(t||n)&&p(!0)},[t,n]),g?f.createElement("div",{ref:e,className:A("".concat(a,"-content"),(o={},E(o,"".concat(a,"-content-active"),n),E(o,"".concat(a,"-content-inactive"),!n),o),l),style:c,role:i},f.createElement("div",{className:"".concat(a,"-content-box")},r)):null});V.displayName="PanelContent";var we=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],J=function(s){z(o,s);var e=q(o);function o(){var a;W(this,o);for(var t=arguments.length,l=new Array(t),c=0;c<t;c++)l[c]=arguments[c];return a=e.call.apply(e,[this].concat(l)),a.onItemClick=function(){var r=a.props,n=r.onItemClick,i=r.panelKey;typeof n=="function"&&n(i)},a.handleKeyPress=function(r){(r.key==="Enter"||r.keyCode===13||r.which===13)&&a.onItemClick()},a.renderIcon=function(){var r=a.props,n=r.showArrow,i=r.expandIcon,d=r.prefixCls,u=r.collapsible;if(!n)return null;var g=typeof i=="function"?i(a.props):f.createElement("i",{className:"arrow"});return g&&f.createElement("div",{className:"".concat(d,"-expand-icon"),onClick:u==="header"||u==="icon"?a.onItemClick:null},g)},a.renderTitle=function(){var r=a.props,n=r.header,i=r.prefixCls,d=r.collapsible;return f.createElement("span",{className:"".concat(i,"-header-text"),onClick:d==="header"?a.onItemClick:null},n)},a}return X(o,[{key:"shouldComponentUpdate",value:function(t){return!T(this.props,t)}},{key:"render",value:function(){var t,l,c=this.props,r=c.className,n=c.id,i=c.style,d=c.prefixCls,u=c.headerClass,g=c.children,p=c.isActive,C=c.destroyInactivePanel,y=c.accordion,$=c.forceRender,I=c.openMotion,m=c.extra,b=c.collapsible,x=oe(c,we),N=b==="disabled",S=b==="header",h=b==="icon",P=A((t={},E(t,"".concat(d,"-item"),!0),E(t,"".concat(d,"-item-active"),p),E(t,"".concat(d,"-item-disabled"),N),t),r),w=A("".concat(d,"-header"),(l={},E(l,u,u),E(l,"".concat(d,"-header-collapsible-only"),S),E(l,"".concat(d,"-icon-collapsible-only"),h),l)),_={className:w,"aria-expanded":p,"aria-disabled":N,onKeyPress:this.handleKeyPress};!S&&!h&&(_.onClick=this.onItemClick,_.role=y?"tab":"button",_.tabIndex=N?-1:0);var O=m!=null&&typeof m!="boolean";return delete x.header,delete x.panelKey,delete x.onItemClick,delete x.showArrow,delete x.expandIcon,f.createElement("div",H({},x,{className:P,style:i,id:n}),f.createElement("div",_,this.renderIcon(),this.renderTitle(),O&&f.createElement("div",{className:"".concat(d,"-extra")},m)),f.createElement(le,H({visible:p,leavedClassName:"".concat(d,"-content-hidden")},I,{forceRender:$,removeOnLeave:C}),function(M,te){var ne=M.className,ae=M.style;return f.createElement(V,{ref:te,prefixCls:d,className:ne,style:ae,isActive:p,forceRender:$,role:y?"tabpanel":null},g)}))}}]),o}(f.Component);J.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};function L(s){var e=s;if(!Array.isArray(e)){var o=ce(e);e=o==="number"||o==="string"?[e]:[]}return e.map(function(a){return String(a)})}var k=function(s){z(o,s);var e=q(o);function o(a){var t;W(this,o),t=e.call(this,a),t.onClickItem=function(n){var i=t.state.activeKey;if(t.props.accordion)i=i[0]===n?[]:[n];else{i=ie(i);var d=i.indexOf(n),u=d>-1;u?i.splice(d,1):i.push(n)}t.setActiveKey(i)},t.getNewChild=function(n,i){if(!n)return null;var d=t.state.activeKey,u=t.props,g=u.prefixCls,p=u.openMotion,C=u.accordion,y=u.destroyInactivePanel,$=u.expandIcon,I=u.collapsible,m=n.key||String(i),b=n.props,x=b.header,N=b.headerClass,S=b.destroyInactivePanel,h=b.collapsible,P=!1;C?P=d[0]===m:P=d.indexOf(m)>-1;var w=h??I,_={key:m,panelKey:m,header:x,headerClass:N,isActive:P,prefixCls:g,destroyInactivePanel:S??y,openMotion:p,accordion:C,children:n.props.children,onItemClick:w==="disabled"?null:t.onClickItem,expandIcon:$,collapsible:w};return typeof n.type=="string"?n:(Object.keys(_).forEach(function(O){typeof _[O]>"u"&&delete _[O]}),f.cloneElement(n,_))},t.getItems=function(){var n=t.props.children;return Y(n).map(t.getNewChild)},t.setActiveKey=function(n){"activeKey"in t.props||t.setState({activeKey:n}),t.props.onChange(t.props.accordion?n[0]:n)};var l=a.activeKey,c=a.defaultActiveKey,r=c;return"activeKey"in a&&(r=l),t.state={activeKey:L(r)},t}return X(o,[{key:"shouldComponentUpdate",value:function(t,l){return!T(this.props,t)||!T(this.state,l)}},{key:"render",value:function(){var t,l=this.props,c=l.prefixCls,r=l.className,n=l.style,i=l.accordion,d=A((t={},E(t,c,!0),E(t,r,!!r),t));return f.createElement("div",{className:d,style:n,role:i?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(t){var l={};return"activeKey"in t&&(l.activeKey=L(t.activeKey)),l}}]),o}(f.Component);k.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1};k.Panel=J;k.Panel;const Ae=s=>{const{getPrefixCls:e}=f.useContext(Z),{prefixCls:o,className:a="",showArrow:t=!0}=s,l=e("collapse",o),c=A({[`${l}-no-arrow`]:!t},a);return f.createElement(k.Panel,Object.assign({},s,{prefixCls:l,className:c}))},ke=Ae,Oe=s=>{const{componentCls:e,collapseContentBg:o,padding:a,collapseContentPaddingHorizontal:t,collapseHeaderBg:l,collapseHeaderPadding:c,collapsePanelBorderRadius:r,lineWidth:n,lineType:i,colorBorder:d,colorText:u,colorTextHeading:g,colorTextDisabled:p,fontSize:C,lineHeight:y,marginSM:$,paddingSM:I,motionDurationSlow:m,fontSizeIcon:b}=s,x=`${n}px ${i} ${d}`;return{[e]:Object.assign(Object.assign({},me(s)),{backgroundColor:l,border:x,borderBottom:0,borderRadius:`${r}px`,"&-rtl":{direction:"rtl"},[`& > ${e}-item`]:{borderBottom:x,"&:last-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`0 0 ${r}px ${r}px`}},[`> ${e}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:c,color:g,lineHeight:y,cursor:"pointer",transition:`all ${m}, visibility 0s`,[`> ${e}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${e}-expand-icon`]:{height:C*y,display:"flex",alignItems:"center",paddingInlineEnd:$},[`${e}-arrow`]:Object.assign(Object.assign({},fe()),{fontSize:b,svg:{transition:`transform ${m}`}}),[`${e}-header-text`]:{marginInlineEnd:"auto"}},[`${e}-header-collapsible-only`]:{cursor:"default",[`${e}-header-text`]:{flex:"none",cursor:"pointer"}},[`${e}-icon-collapsible-only`]:{cursor:"default",[`${e}-expand-icon`]:{cursor:"pointer"}},[`&${e}-no-arrow`]:{[`> ${e}-header`]:{paddingInlineStart:I}}},[`${e}-content`]:{color:u,backgroundColor:o,borderTop:x,[`& > ${e}-content-box`]:{padding:`${a}px ${t}px`},"&-hidden":{display:"none"}},[`${e}-item:last-child`]:{[`> ${e}-content`]:{borderRadius:`0 0 ${r}px ${r}px`}},[`& ${e}-item-disabled > ${e}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:p,cursor:"not-allowed"}},[`&${e}-icon-position-end`]:{[`& > ${e}-item`]:{[`> ${e}-header`]:{[`${e}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:$}}}}})}},Re=s=>{const{componentCls:e}=s,o=`> ${e}-item > ${e}-header ${e}-arrow svg`;return{[`${e}-rtl`]:{[o]:{transform:"rotate(180deg)"}}}},je=s=>{const{componentCls:e,collapseHeaderBg:o,paddingXXS:a,colorBorder:t}=s;return{[`${e}-borderless`]:{backgroundColor:o,border:0,[`> ${e}-item`]:{borderBottom:`1px solid ${t}`},[`
        > ${e}-item:last-child,
        > ${e}-item:last-child ${e}-header
      `]:{borderRadius:0},[`> ${e}-item:last-child`]:{borderBottom:0},[`> ${e}-item > ${e}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${e}-item > ${e}-content > ${e}-content-box`]:{paddingTop:a}}}},Te=s=>{const{componentCls:e,paddingSM:o}=s;return{[`${e}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${e}-item`]:{borderBottom:0,[`> ${e}-content`]:{backgroundColor:"transparent",border:0,[`> ${e}-content-box`]:{paddingBlock:o}}}}}},Ke=de("Collapse",s=>{const e=pe(s,{collapseContentBg:s.colorBgContainer,collapseHeaderBg:s.colorFillAlter,collapseHeaderPadding:`${s.paddingSM}px ${s.padding}px`,collapsePanelBorderRadius:s.borderRadiusLG,collapseContentPaddingHorizontal:16});return[Oe(e),je(e),Te(e),Re(e),ue(e)]}),ee=s=>{const{getPrefixCls:e,direction:o}=f.useContext(Z),{prefixCls:a,className:t="",bordered:l=!0,ghost:c,expandIconPosition:r="start"}=s,n=e("collapse",a),i=e(),[d,u]=Ke(n),g=f.useMemo(()=>r==="left"?"start":r==="right"?"end":r,[r]),p=function(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{expandIcon:m}=s,b=m?m(I):f.createElement(ve,{rotate:I.isActive?90:void 0});return B(b,()=>({className:A(b.props.className,`${n}-arrow`)}))},C=A(`${n}-icon-position-${g}`,{[`${n}-borderless`]:!l,[`${n}-rtl`]:o==="rtl",[`${n}-ghost`]:!!c},t,u),y=Object.assign(Object.assign({},he(i)),{motionAppear:!1,leavedClassName:`${n}-content-hidden`}),$=()=>{const{children:I}=s;return Y(I).map((m,b)=>{var x;if(!((x=m.props)===null||x===void 0)&&x.disabled){const N=m.key||String(b),{disabled:S,collapsible:h}=m.props,P=Object.assign(Object.assign({},Ce(m.props,["disabled"])),{key:N,collapsible:h??(S?"disabled":void 0)});return B(m,P)}return m})};return d(f.createElement(k,Object.assign({openMotion:y},s,{expandIcon:p,prefixCls:n,className:C}),$()))};ee.Panel=ke;const K=ee,{Panel:U}=K,Me=({share:s,setOrdid:e,setModule:o,handlesubmit:a,organizations:t})=>{var u,g;const{data:l=[]}=ge(""),c=p=>{o(p)},r=((g=(u=t==null?void 0:t[0])==null?void 0:u.modules_permissions)==null?void 0:g.filter(p=>p.status))||[],n=[...l],i=r.length?n.map(p=>({...p,status:!1})):n;l.forEach((p,C)=>r==null?void 0:r.forEach(y=>{y.general_modules_id===p.id&&(i[C]={...i[C],status:!0})}));const d=p=>e(Number(p));return v.jsx(v.Fragment,{children:v.jsx(K,{accordion:!0,onChange:d,children:t==null?void 0:t.map(p=>v.jsx(U,{header:p.name,children:v.jsx(K,{accordion:!0,children:v.jsxs(U,{header:`Organization '${p.name}' Modules`,children:[v.jsx(F.Group,{defaultValue:[...i==null?void 0:i.filter(C=>C.status).map(C=>C.name)],style:{width:"100%"},onChange:c,children:i==null?void 0:i.map(C=>v.jsxs(f.Fragment,{children:[v.jsx(F,{value:C.name,children:C.name}),v.jsx("br",{})]},C.id))}),v.jsx(xe,{children:v.jsx(j,{type:"link",disabled:s,btnText:"Share",clickHandler:a})})]},`{val.id}-${p.name}`)})},p.id))})})},{LOGIN:He,REGISTER_ORGANIZATION:Be}=Q,De=({refetch:s,closeModal:e,shared:o=!1,sharedOrg:a=[],isModal:t=!1})=>{var N,S;const l=be(),{callAxios:c}=ye(),r=$e(),[n,i]=f.useState(),[d,u]=f.useState(),[g,p]=f.useState(),{handleModulePermission:C,general_modules:y}=Ie();f.useLayoutEffect(()=>{t&&i(a),p([...m==null?void 0:m.filter(h=>h.status).map(h=>h.name)])},[]);const $=((S=(N=a[0])==null?void 0:N.modules_permissions)==null?void 0:S.filter(h=>h.status))||[],I=[...y],m=$.length?I.map(h=>({...h,status:!1})):I;y==null||y.forEach((h,P)=>$==null?void 0:$.forEach(w=>{w.general_modules_id===h.id&&(m[P]={...m[P],status:!0})}));const b=()=>{r(Se({url:R.LOGOUT})).unwrap().then(h=>{h&&(r({type:Ne}),localStorage.clear(),l(He,{replace:!0}),G({message:h.message}))})},x=()=>{let h={organization_id:Number(d),modules:C(g)};c({method:"post",url:R.IMS_MODULE_INTEGRATIONS,data:h}).then(P=>{P&&(G({message:P.message}),c({url:R.USER_PROFILE}).then(w=>{r(Ee(w)),t?(s==null||s(),e==null||e()):l(Q.DASHBOARD)}))})};return v.jsx(v.Fragment,{children:v.jsxs(Pe,{align:"middle",style:{margin:"auto 0",width:"100%"},children:[v.jsx(D,{span:10,children:!t&&v.jsxs(v.Fragment,{children:[v.jsx(j,{type:"link",btnText:"Logout",clickHandler:b}),v.jsx(j,{type:"link",btnText:"Create Organization",clickHandler:()=>l(Be,{state:"ims-organizations"})})]})}),v.jsx(D,{span:24,children:v.jsx(Me,{share:o,setOrdid:u,setModule:p,handlesubmit:x,organizations:(n==null?void 0:n.ims_organizations)||n})})]})})};export{De as default};
