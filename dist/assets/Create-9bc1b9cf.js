import{i as E,r as o,u as S,j as t,P as A,o as j,l as O,h as i,p as f,am as m,z as D}from"./index-4b3d7bc8.js";import{u as T}from"./usePermissions-36032956.js";import{P as b}from"./PurchaseOrderForm-00876276.js";import{A as H}from"./AccessDenied-45b92511.js";import"./PaginateSelect-b668bdaf.js";import"./ItemTable-c0313657.js";import"./react-beautiful-dnd.esm-fdc0d50f.js";import"./Create-8edeb959.js";import"./ItemForm-ceb885e2.js";import"./ImageCrop-db92a92e.js";import"./ImageUploader-b2d6894b.js";import"./progress-e3fed29d.js";import"./index-d9b76a87.js";import"./index-b8658cbe.js";import"./Create-93e4462e.js";import"./calculation-671db1b1.js";import"./itemDetailModal-4a763e01.js";import"./DetailPage-51a1d58a.js";import"./capitalize-cfd5966b.js";import"./Processing-a1197381.js";const{PURCHASE_ORDERS:U}=j,{PURCHASE_ORDERS:v,PURCHASE_ORDERS_CREATE:F}=O,ee=()=>{const n=E(),[c,d]=o.useState(0),{checkPermission:p}=T(),{callAxios:l,toggle:u,bool:_}=S(),[r,h]=o.useState([]),{has_PurchaseOrderCreate_permission:R}=p("PurchaseOrderCreate"),g=o.useCallback(e=>d(e),[]),P=o.useCallback(e=>h(e),[]),x=e=>{if(!r.length)i({message:f.select_item,type:"error"});else{const C={...e,items:r,total:c,discount_transaction_level:0,adjustment:e.adjustment||0,order_date:m(e.order_date),expected_delivery_date:m(e.expected_delivery_date)};u(),l({method:"post",url:v,data:C}).then(s=>{var a;s&&(i({message:s.message}),D((a=s==null?void 0:s.data)==null?void 0:a.id,!0,"purchaseorders"),n(-1))})}};return t.jsx(t.Fragment,{children:R?t.jsxs(t.Fragment,{children:[t.jsx(A,{title:"Create Purchase Order",navigateTo:U}),t.jsx(b,{loading:_,onSubmit:x,handleTotal:g,url:F,handleItemList:P})]}):t.jsx(H,{})})};export{ee as default};
