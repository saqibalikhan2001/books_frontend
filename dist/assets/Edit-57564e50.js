import{i as R,r as t,k as y,u as C,j as o,l as D,am as i,h as L}from"./index-4b3d7bc8.js";import{S as T}from"./SalesOrderForm-96138322.js";import{u as W}from"./usePermissions-36032956.js";import{A as $}from"./AccessDenied-45b92511.js";import"./PaginateSelect-b668bdaf.js";import"./ItemTable-c0313657.js";import"./react-beautiful-dnd.esm-fdc0d50f.js";import"./Create-8edeb959.js";import"./ItemForm-ceb885e2.js";import"./ImageCrop-db92a92e.js";import"./ImageUploader-b2d6894b.js";import"./progress-e3fed29d.js";import"./index-d9b76a87.js";import"./index-b8658cbe.js";import"./Create-93e4462e.js";import"./calculation-671db1b1.js";import"./itemDetailModal-4a763e01.js";import"./DetailPage-51a1d58a.js";import"./capitalize-cfd5966b.js";import"./Processing-a1197381.js";const{SALES_ORDERS:m}=D,oe=()=>{const d=R(),[n,c]=t.useState(0),[p]=y(),r=p.get("id"),{checkPermission:u}=W(),{callAxios:h,toggle:l,bool:_}=C(),[S,g]=t.useState([]),[x,E]=t.useState(""),{has_SalesOrderEdit_permission:I}=u("SalesOrderEdit"),[j,b]=t.useState(""),f=t.useCallback(e=>g(e),[]),A=t.useCallback(e=>c(e),[]),k=t.useCallback(e=>E(e),[]),w=t.useCallback(e=>b(e),[]),O=e=>{var a;const P=S.map(s=>({...s,warehouseId:s.warehouse_id}));l(),h({method:"put",url:`${m}/${r}`,data:{...e,total:n,items:P,discount_transaction_level:0,adjustment:e.adjustment||0,shipping_charge:e.shipping_charge||0,warehouse_id:x||j,order_date:i(e.order_date),customer_id:typeof e.customer_id=="object"?(a=e.customer_id)==null?void 0:a.id:e.customer_id,expected_shipment_date:i(e.expected_shipment_date)}}).then(s=>{s&&(L({message:s.message}),d(-1))})};return o.jsx(o.Fragment,{children:I?o.jsx(T,{loading:_,onSubmit:O,handleTotal:A,handleItemList:f,url:`${m}/${r}/edit`,handleWarehouseId:k,handlePrimaryWarehouse:w}):o.jsx($,{})})};export{oe as default};
