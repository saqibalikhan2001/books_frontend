import{i as A,r as n,u as O,j as s,l as E,h as L,z as R}from"./index-4b3d7bc8.js";import{C as T}from"./CustomerTab-c6c321f7.js";import{u as F}from"./usePermissions-36032956.js";import{A as N}from"./AccessDenied-45b92511.js";import"./useListing-af775608.js";import"./useDelayUnmount-cb77ae7b.js";import"./index-b8658cbe.js";import"./progress-e3fed29d.js";import"./ImageUploader-b2d6894b.js";const{CUSTOMERS:l,CREATE:k}=E,q=({isModal:i=!1,setIsCustomerModalOpen:r,isCustomerModalOpen:d,setIsCustomerId:u})=>{const g=A(),{checkPermission:f}=F(),[x,h]=n.useState([]),{callAxios:C,toggle:_,bool:S}=O(),[c,m]=n.useState([]),{has_ContactCreate_permission:b}=f("ContactCreate"),j=n.useCallback(a=>{m(a)},[]),y=a=>{let e=new FormData;const p={...a};for(const t in p)e.append(t,p[t]||"");e.append("contact_type_id","2"),e.append("currency_id",x),e.append("tax_exempt",JSON.stringify(!!a.tax_exempt)),e.append("same_as_billing",JSON.stringify(a.same_as_billing)),e.append("isContactImageDeleted",JSON.stringify(!a.photo));for(let[t,o]of Object.entries(c))e.append(`attachments[${t}]`,o.originFileObj);_(),C({method:"post",url:l,data:e}).then(t=>{var o;t&&(L({message:t.message}),i?(r(!1),u(t==null?void 0:t.data)):(R((o=t==null?void 0:t.data)==null?void 0:o.id,!0,"customers"),g(-1)))})};return s.jsx(s.Fragment,{children:b?s.jsx(s.Fragment,{children:s.jsx(T,{create:!0,loading:S,isModal:i,onSubmit:y,attachList:c,setCurrency:h,setAttachList:m,url:`${l}${k}`,isCustomerModalOpen:d,setIsCustomerModalOpen:r,handleImageAttachList:j})}):s.jsx(N,{})})};export{q as default};
