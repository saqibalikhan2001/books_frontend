import{i as L,u as S,r as i,ab as T,k,aD as D,j as o,l as P,am as m,h as $}from"./index-4b3d7bc8.js";import{R as w}from"./RecurringInvoiceForm-09d13ada.js";import{u as F}from"./usePermissions-36032956.js";import{A as N}from"./AccessDenied-45b92511.js";import"./RepeatModal-0fdc96f9.js";import"./PaginateSelect-b668bdaf.js";import"./ItemTable-c0313657.js";import"./react-beautiful-dnd.esm-fdc0d50f.js";import"./Create-8edeb959.js";import"./ItemForm-ceb885e2.js";import"./ImageCrop-db92a92e.js";import"./ImageUploader-b2d6894b.js";import"./progress-e3fed29d.js";import"./index-d9b76a87.js";import"./index-b8658cbe.js";import"./Create-93e4462e.js";import"./calculation-671db1b1.js";import"./itemDetailModal-4a763e01.js";import"./DetailPage-51a1d58a.js";import"./capitalize-cfd5966b.js";import"./Processing-a1197381.js";const{RECURRING_INVOICE:c}=P,rt=()=>{const p=L(),{callAxios:d}=S(),[_,u]=i.useState(0),[g,s]=T(),[l]=k(),{checkPermission:h}=F(),n=l.get("id"),[f,I]=i.useState(),{has_RecurringInvoicesEdit_permission:j}=h("RecurringInvoicesEdit"),{data:x=[]}=D(""),R=i.useCallback(t=>u(t),[]),E=i.useCallback(t=>I(t),[]),b=t=>{var a;let r,C=/\d/.test(t.repeat_duration);typeof t.repeat_duration=="string"&&(C?r=t.repeat_duration.split(" ")[0]+" "+t.repeat_duration.split(" ")[1].split("(s)")[0].toLowerCase():r=t.repeat_duration.split("(s)")[0].toLowerCase());const y=r||t.repeat_duration.value,A={...t,items:f,total:_,discount_type:"",repeat_duration:y,invoice_terms:typeof t.invoice_terms!="object"?x.find(e=>e.id===t.invoice_terms)||{}:t.invoice_terms,discount_transaction_level:0,adjustment:t.adjustment||0,shipping_charge:t.shipping_charge||0,customer_id:typeof t.customer_id=="object"?(a=t.customer_id)==null?void 0:a.id:t.customer_id,end_date:m(t.end_date),start_date:m(t.start_date)};s(),d({method:"put",url:`${c}/${n}/update`,data:A}).then(e=>{s(),e&&($({message:e.message}),p(-1))})};return o.jsx(o.Fragment,{children:j?o.jsx(w,{loading:g,onSubmit:b,handleTotal:R,handleItemList:E,url:`${c}/${n}/edit`}):o.jsx(N,{})})};export{rt as default};
